# Remote Raw Viewer - 運用準備チェックリスト

## 概要

本ドキュメントは、Remote Raw Viewerを実運用環境に移行する前に確認すべき項目をチェックリスト形式でまとめています。

## 運用環境情報

### ターゲット環境構成

| 項目 | 詳細 | 状態 |
|------|------|------|
| **クライアント** | Windows 11 + Chrome/Edge | ✅ 確認済み |
| **画像サーバー** | Ubuntu Server | 🔄 設定要 |
| **アプリケーションサーバー** | Docker対応サーバー | 🔄 準備要 |

## 1. インフラストラクチャ準備

### 1.1 Application Server 要件 ☐

- [ ] **OS**: Ubuntu 22.04 LTS または CentOS 8+
- [ ] **Docker**: Docker Engine 24.0+ インストール済み
- [ ] **Docker Compose**: v2 インストール済み
- [ ] **システムリソース**:
  - [ ] CPU: 2コア以上
  - [ ] RAM: 4GB以上
  - [ ] Storage: 20GB以上の空き容量
- [ ] **ネットワーク**:
  - [ ] インターネット接続（Docker イメージダウンロード用）
  - [ ] Ubuntu Image Server への SSH アクセス（Port 22）
  - [ ] クライアントからのHTTPS アクセス（Port 443）

### 1.2 Ubuntu Image Server 要件 ☐

- [ ] **SSH Server**: OpenSSH インストール・起動済み
- [ ] **必須コマンド**:
  - [ ] `base64` コマンド利用可能
  - [ ] `ls` コマンド利用可能
  - [ ] `stat` コマンド利用可能
- [ ] **オプションコマンド**:
  - [ ] `imagemagick` インストール済み（RAW画像処理用）
- [ ] **ユーザーアカウント**:
  - [ ] 画像アクセス用ユーザー作成済み
  - [ ] 画像ディレクトリへの読み取り権限設定済み
- [ ] **画像ファイル**:
  - [ ] 対象画像ファイルが適切なディレクトリに配置済み
  - [ ] ファイル権限が適切に設定済み（読み取り可能）

## 2. セキュリティ設定

### 2.1 SSH認証設定 ☐

- [ ] **認証方式決定**:
  - [ ] SSH Key認証（推奨）
  - [ ] Password認証（簡易設定用）
- [ ] **SSH Key設定**（Key認証の場合）:
  - [ ] 公開鍵・秘密鍵ペア生成済み
  - [ ] Ubuntu Server に公開鍵設置済み
  - [ ] 秘密鍵の安全な保管場所確保済み
- [ ] **ネットワークセキュリティ**:
  - [ ] ファイアウォール設定済み
  - [ ] 必要ポートのみ開放済み

### 2.2 SSL/TLS設定 ☐

- [ ] **ドメイン準備**:
  - [ ] 本番用ドメイン取得済み
  - [ ] DNS設定済み
- [ ] **SSL証明書**:
  - [ ] Let's Encrypt または商用証明書準備済み
  - [ ] 証明書の自動更新設定済み

## 3. アプリケーション準備

### 3.1 Production Dockerfiles 作成 ☐

- [ ] **Frontend Dockerfile.prod**: 作成・テスト済み
- [ ] **Backend Dockerfile.prod**: 作成・テスト済み
- [ ] **docker-compose.prod.yml**: 作成・テスト済み
- [ ] **Nginx設定**: HTTPS対応設定済み

### 3.2 環境設定ファイル ☐

- [ ] **.env.production**: 本番用環境変数設定済み
- [ ] **セキュリティキー**: ランダム生成済み
- [ ] **データベース設定**: 接続情報ストレージ設定済み

### 3.3 ログ・監視設定 ☐

- [ ] **ログディレクトリ**: 作成・権限設定済み
- [ ] **ログローテーション**: 設定済み
- [ ] **監視設定**: アプリケーション状態監視設定済み

## 4. テスト・検証

### 4.1 機能テスト ☐

- [ ] **SSH接続テスト**: Application Server → Ubuntu Server
- [ ] **画像取得テスト**: base64コマンドでの画像データ取得
- [ ] **権限テスト**: 全対象ディレクトリへのアクセス確認

### 4.2 パフォーマンステスト ☐

- [ ] **レスポンス時間**: 画像一覧表示（< 3秒）
- [ ] **大量画像テスト**: 1000+ 画像での動作確認
- [ ] **同時接続テスト**: 複数ユーザーでの同時利用

### 4.3 セキュリティテスト ☐

- [ ] **認証テスト**: 不正アクセスの防止確認
- [ ] **HTTPS通信**: 暗号化通信の確認
- [ ] **ファイルアクセス制限**: 権限外ファイルへのアクセス防止

## 5. 運用手順書

### 5.1 運用ドキュメント準備 ☐

- [ ] **起動・停止手順**: マニュアル作成済み
- [ ] **トラブルシューティング**: 一般的な問題と解決方法
- [ ] **メンテナンス手順**: 定期メンテナンス作業手順
- [ ] **バックアップ手順**: データ・設定ファイルのバックアップ

### 5.2 緊急時対応 ☐

- [ ] **障害対応フロー**: 障害発生時の対応手順
- [ ] **連絡体制**: 運用担当者の連絡先
- [ ] **ロールバック手順**: 問題発生時の復旧方法

## 6. デプロイ実行前チェック

### 6.1 最終確認 ☐

- [ ] **全チェック項目**: 上記すべての項目が完了
- [ ] **ステージング環境**: 本番と同等環境でのテスト完了
- [ ] **運用担当者**: 操作手順の理解・習得済み
- [ ] **ユーザー通知**: システム移行の事前通知済み

### 6.2 デプロイ計画 ☐

- [ ] **デプロイ日時**: 決定・関係者への通知済み
- [ ] **作業時間**: 見積もり済み（推定2-4時間）
- [ ] **ロールバック判断基準**: 明確化済み
- [ ] **動作確認項目**: リスト化済み

## 7. 具体的な設定値（実運用用）

### 7.1 接続情報テンプレート

```bash
# Ubuntu Image Server 接続情報
HOST_ADDRESS="<Ubuntu ServerのIPアドレス>"
SSH_USER="<画像アクセス用ユーザー名>"
SSH_PORT="22"
IMAGE_DIRECTORY="<画像格納ディレクトリパス>"

# Application Server 情報  
APP_DOMAIN="<本番用ドメイン名>"
APP_PORT_HTTP="3000"
APP_PORT_HTTPS="443"
```

### 7.2 必要な認証情報

- [ ] Ubuntu Server SSH認証情報
- [ ] SSL証明書ファイル
- [ ] 環境変数用のセキュリティキー

## チェックリスト完了確認

- [ ] **インフラストラクチャ準備**: すべて完了
- [ ] **セキュリティ設定**: すべて完了  
- [ ] **アプリケーション準備**: すべて完了
- [ ] **テスト・検証**: すべて完了
- [ ] **運用手順書**: すべて完了
- [ ] **デプロイ実行前チェック**: すべて完了

---

**✅ すべてのチェック項目が完了した場合、運用環境への展開準備が整っています。**

**最終更新**: 2025-06-16
**レビュー担当**: [担当者名]
**承認**: [承認者名]